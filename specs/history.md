## üÜî 20250907-01

**–î–∞—Ç–∞:** 2025-09-07  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ú–æ–¥—É–ª—å:** infra  
**–ó–∞–≥–æ–ª–æ–≤–æ–∫:** –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –Ω–∞ –æ—Å–Ω–æ–≤–µ TMA Next.js —à–∞–±–ª–æ–Ω–∞  
**–°—Å—ã–ª–∫–∞:** [initial-commit-hash](https://github.com/username/tutor-manager/commit/initial)

### üìñ –ö–æ–Ω—Ç–µ–∫—Å—Ç
–ù–µ–æ–±—Ö–æ–¥–∏–º–æ –Ω–∞—á–∞—Ç—å —Å –≥–æ—Ç–æ–≤–æ–π, —Å–æ–≤–º–µ—Å—Ç–∏–º–æ–π —Å Telegram Mini App –æ—Å–Ω–æ–≤—ã, —á—Ç–æ–±—ã –Ω–µ —Ç—Ä–∞—Ç–∏—Ç—å –≤—Ä–µ–º—è –Ω–∞ –Ω–∞—Å—Ç—Ä–æ–π–∫—É SDK, —Ç–µ–º, —Ä–æ—É—Ç–∏–Ω–≥–∞.

### ‚úÖ –†–µ—à–µ–Ω–∏–µ
–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω —à–∞–±–ª–æ–Ω https://github.com/Telegram-Mini-Apps/nextjs-template.git ‚Äî –æ–Ω –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç:
- –ì–æ—Ç–æ–≤—É—é –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—é —Å `@tma.js/sdk`
- –ü–æ–¥–¥–µ—Ä–∂–∫—É `initData`, `themeParams`
- –ü—Ä–∏–º–µ—Ä—ã –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤ –ø–æ–¥ Telegram UI
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π Next.js App Router

### ‚ÜîÔ∏è –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
- –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ–µ–∫—Ç —Å –Ω—É–ª—è ‚Üí –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ, —Å–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ —Ä—É—Ç–∏–Ω—ã.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π —à–∞–±–ª–æ–Ω ‚Üí –æ—Ç–∫–ª–æ–Ω–µ–Ω–æ, —ç—Ç–æ—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç—Å—è —Å–æ–æ–±—â–µ—Å—Ç–≤–æ–º TMA.

### ‚ö†Ô∏è –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è
- –í—Å–µ –ø–æ—Å–ª–µ–¥—É—é—â–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã –¥–æ–ª–∂–Ω—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `useInitData`, `useThemeParams` –∏–∑ `@tma.js/sdk`.
- –°—Ç–∏–ª–∏ –¥–æ–ª–∂–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤–æ–≤–∞—Ç—å `tailwind.config.js` —à–∞–±–ª–æ–Ω–∞.
- –ù–µ–ª—å–∑—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å SSR ‚Äî —Ç–æ–ª—å–∫–æ CSR.

## üÜî 20250908-01

**–î–∞—Ç–∞:** 2025-09-08  
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ  
**–ú–æ–¥—É–ª—å:** auth, onboarding, infra  
**–ó–∞–≥–æ–ª–æ–≤–æ–∫:** –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è Supabase, –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –≤—Ö–æ–¥–µ  
**–°—Å—ã–ª–∫–∞:** [commit:20250908-01](https://github.com/username/tutor-manager/commit/20250908-01)

### üìñ –ö–æ–Ω—Ç–µ–∫—Å—Ç
–ù—É–∂–Ω–æ –æ–±–µ—Å–ø–µ—á–∏—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—é —á–µ—Ä–µ–∑ Telegram, —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ Supabase, —Ö—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª—è –≤ —Ç–∞–±–ª–∏—Ü–µ `public.users` —Å RLS, –∞ —Ç–∞–∫–∂–µ –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º. –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≤–µ—Ä–∫—É —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è –∏ —É–ª—É—á—à–∏—Ç—å UX –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### ‚úÖ –†–µ—à–µ–Ω–∏–µ
- –î–æ–±–∞–≤–ª–µ–Ω—ã API-—Ä–æ—É—Ç—ã:
  - `app/api/auth/telegram/route.ts` ‚Äî –ø—Ä–æ–∫—Å–∏ –∫ Edge Function –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏ initData –∏ –≤—ã–¥–∞—á–∏ —Å–µ—Å—Å–∏–∏.
  - `app/api/check-teacher/route.ts` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞–ª–∏—á–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø–æ `telegram_id` (service_role, HEAD+count).
  - `app/api/register-teacher/route.ts` ‚Äî —Å–æ–∑–¥–∞–Ω–∏–µ `auth.users` (admin), upsert –ø—Ä–æ—Ñ–∏–ª—è –≤ `public.users`, –æ—Ç–∫–∞—Ç –ø—Ä–∏ –æ—à–∏–±–∫–µ, –≤–æ–∑–≤—Ä–∞—Ç —Ä–µ–∞–ª—å–Ω–æ–π —Å–µ—Å—Å–∏–∏ —á–µ—Ä–µ–∑ `signInWithPassword`.
- –°—Ç—Ä–∞–Ω–∏—Ü—ã:
  - `app/onboarding/page.tsx` ‚Äî –æ–Ω–±–æ—Ä–¥–∏–Ω–≥ —Å TMA initData, –∫–Ω–æ–ø–∫–∞–º–∏ (shadcn/ui), Zustand –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏.
  - `app/login/page.tsx` ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ initData –∏ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Å—Å–∏–∏ Supabase.
  - `app/page.tsx` ‚Äî –ø—Ä–æ–≤–µ—Ä–∫–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –ø—Ä–∏ –≤—Ö–æ–¥–µ –∏ —Ä–µ–¥–∏—Ä–µ–∫—Ç (React Query).
  - `app/terms/page.tsx`, `app/privacy/page.tsx` ‚Äî –∑–∞–≥–ª—É—à–∫–∏ –¥–ª—è –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤.
- –ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞:
  - –ö–ª–∏–µ–Ω—Ç—ã Supabase: –±—Ä–∞—É–∑–µ—Ä–Ω—ã–π (`getSupabase`) –∏ —Å–µ—Ä–≤–µ—Ä–Ω—ã–π (`getSupabaseAdmin/getSupabaseAnon`).
  - –í–∫–ª—é—á—ë–Ω React Query –ø—Ä–æ–≤–∞–π–¥–µ—Ä (`QueryProvider`).
  - –ö–∞—Å—Ç–æ–º–Ω–∞—è –∫–Ω–æ–ø–∫–∞ –Ω–∞ –±–∞–∑–µ shadcn/ui (`components/ui/button.tsx`).
- –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (–ø–æ–¥–≥–æ—Ç–æ–≤–ª–µ–Ω–æ –∫ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏—é):
  - –¢–∞–±–ª–∏—Ü–∞ `public.users (id uuid PK ‚Üí auth.users, telegram_id text, first_name, last_name, username, photo_url, created_at)`.
  - –ò–Ω–¥–µ–∫—Å –ø–æ `telegram_id`.
  - RLS –ø–æ–ª–∏—Ç–∏–∫–∏: select/update/insert —Ç–æ–ª—å–∫–æ –¥–ª—è `id = auth.uid()`.

### ‚ÜîÔ∏è –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
- –ü—Ä–æ–≤–µ—Ä—è—Ç—å —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ –∫–ª–∏–µ–Ω—Ç—Å–∫–∏–π anon-–∫–ª–∏–µ–Ω—Ç –∏ RLS ‚Üí –º–æ–∂–µ—Ç –¥–∞–≤–∞—Ç—å –ª–æ–∂–Ω—ã–µ –æ—Ç—Ä–∏—Ü–∞–Ω–∏—è –∏ —Å–ª–æ–∂–Ω–µ–µ –≤ –æ—Ç–ª–∞–¥–∫–µ. –í—ã–±—Ä–∞–ª–∏ service_role –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ.
- –•—Ä–∞–Ω–∏—Ç—å `telegram_id` –∫–∞–∫ bigint ‚Üí —Ä–∏—Å–∫ –ø–æ—Ç–µ—Ä–∏ —Ç–æ—á–Ω–æ—Å—Ç–∏ –≤ JS. –í—ã–±—Ä–∞–ª–∏ —Ç–µ–∫—Å—Ç.

### ‚ö†Ô∏è –ü–æ—Å–ª–µ–¥—Å—Ç–≤–∏—è
- –í –æ–∫—Ä—É–∂–µ–Ω–∏–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –∑–∞–¥–∞–Ω—ã: `NEXT_PUBLIC_SUPABASE_URL`, `NEXT_PUBLIC_SUPABASE_ANON_KEY`, `SUPABASE_SERVICE_ROLE_KEY` (—Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ), `SUPABASE_AUTH_TELEGRAM_URL` (+ –æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ `SUPABASE_AUTH_TELEGRAM_SECRET`).
- Email/Password –ø—Ä–æ–≤–∞–π–¥–µ—Ä –≤ Supabase –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å –≤–∫–ª—é—á—ë–Ω.
- –û–Ω–±–æ—Ä–¥–∏–Ω–≥ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–æ–≤—ã–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º; —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø–æ–ø–∞–¥–∞—é—Ç —Å—Ä–∞–∑—É –≤ `/app`.